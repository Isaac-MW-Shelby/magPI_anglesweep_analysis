function gradient_masked_B = simulate_B_with_gradient_mask_sped_up( ...
            bead_params, X, Y, nvDepth, pixel_side_length, ...
            subdivisions_per_axis, gradient_value, conversion_to_uT, ...
            front_binning_matrix, back_binning_matrix, X_pixel_centers, ...
            Y_pixel_centers)

        
        
        
        
        
        
end

